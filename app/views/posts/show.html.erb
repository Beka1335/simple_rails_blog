
<div class="container">
  <%= render @post %>

    <div class="container-sm">
      <div class="row align-items-start" style="margin-bottom: 10px;">
        <% if current_user %>
          <% pre_like = @post.likes.find { |like| like.user_id == current_user.id} %>
          <% if pre_like %>
            <%= button_to  post_like_path(@post.id, pre_like), method: :delete, class: 'btn' do%>
              <%= image_tag "like.png" %>
            <% end %>
            
          <% else %>
            <%= button_to  post_likes_path(@post.id), method: :post, class: 'btn' do%>
              <%= image_tag "Unlike.png", height: 24 %>
            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>

  <% if current_user == @post.user %>
    <div class="container-sm">
      <div class="row align-items-start" style="margin-bottom: 10px;">
        <div class="col-md-auto">
          <%= button_to t(:edit_this_post), edit_post_path(@post), :method => "get", class: "btn btn-outline-primary" %>
        </div>
        <div class="col-md-auto">
          <%= button_to t(:back_to_posts), posts_path, :method => "get", class: "btn btn-outline-primary" %>
        </div>
        <div class="col-md-auto">
          <%= button_to "Destroy this post", @post, method: :delete, class: "btn btn-outline-danger" %>
        </div>
      </div>
    </div>
  <% else %>
    <div class="container-sm">
      <div class="row align-items-start" style="margin-bottom: 10px;">
        <%= button_to t(:back_to_posts), posts_path, :method => "get", class: "btn btn-outline-primary" %>
      </div>
    </div>
    
  <% end %>
  </div>
</div>
<div class="container" style=" margin-bottom: 50px">
  <%= render 'comments/form', 
    post: @post, 
    comment: @post.comments.build,
    submit_label: "Reply" %>
  <% @comments.each do |comment| %>
    <%= render 'comments/comment', 
    post: @post, 
    comment: comment %>
  <% end %>
</div>

